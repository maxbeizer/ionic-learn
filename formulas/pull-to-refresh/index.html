<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta charset='utf-8'>
    <title>Pull to Refresh | Formulas | Learn Ionic</title>
    <link href='/css/site.css' rel='stylesheet'>
    <link href='//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.0/animate.min.css' rel='stylesheet'>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44023830-6', 'ionicframework.com');
      ga('send', 'pageview');
    </script>
  </head>
  <body class='full-page no-js'>
    <script>
      document.body.classList.remove('no-js');
    </script>
    <div class='container'>
      <div class='row'>
        <div class='side-nav'>
          <div class='logo'>
            <a href='/'>
              <img alt='Learn Ionic Framework' height='43' src='/img/learn-ionicframework@2x.png' width='194'>
            </a>
          </div>
          <nav>
            <ul>
              <li>
                <a href='/videos/'>
                  <i class='ion-videos'></i>
                  <p>Videos</p>
                </a>
              </li>
              <li>
                <a class='active' href='/formulas/'>
                  <i class='ion-formulas'></i>
                  <p>Formulas</p>
                </a>
              </li>
              <li>
                <a href='/talks/'>
                  <i class='ion-talks'></i>
                  <p>Talks</p>
                </a>
              </li>
              <li>
                <a href='/resources/'>
                  <i class='ion-resources'></i>
                  <p>Resources</p>
                </a>
              </li>
            </ul>
            <footer>
              <ul>
                <li>
                  <a href='https://github.com/driftyco/ionic-learn/issues/new' target='_new'>
                    <i class='ion-suggestions'></i>
                    <p>Suggest a Topic</p>
                  </a>
                </li>
                <li>
                  <a href='http://forum.ionicframework.com/' target='_new'>
                    <i class='ion-forum'></i>
                    <p>Forums</p>
                  </a>
                </li>
                <li>
                  <a href='https://github.com/driftyco/ionic' target='_new'>
                    <i class='ion-github'></i>
                    <p>Github</p>
                  </a>
                </li>
                <li>
                  <a href='https://twitter.com/ionicframework' target='_new'>
                    <i class='ion-twitter'></i>
                    <p>Twitter</p>
                  </a>
                </li>
                <li>
                  <a href='https://plus.google.com/+Ionicframework/posts' target='_new'>
                    <i class='ion-googleplus'></i>
                    <p>Plus</p>
                  </a>
                </li>
              </ul>
            </footer>
            <form action='http://codiqa.createsend.com/t/t/s/thodi/' class='email-digest' method='post'>
              <label for='cm-thodi-thodi'>
                <p>Sign up for the weekly Learn Digest!</p>
              </label>
              <div class='digest-wrapper'>
                <input name='cm-thodi-thodi' placeholder='Email address' required type='email'>
                <input type='submit' value='Go'>
              </div>
            </form>
            <div class='email-digest-success'>
              <p>Thanks for signing up. Every Friday you'll get an update on all of the new and exciting lessons on Learn Ionic!</p>
            </div>
          </nav>
        </div>
        <div class='main-pane'>
          <div class='content formula'>
            <nav>
              <a class='left' href='/formulas/'>
                <i class='ion-chevron-left'></i>
                <span style='margin-left:0px;'>All Formulas</span>
              </a>
            </nav>
            <article>
              <header>
                <h1>Pull to Refresh</h1>
                <div class='byline'>
                  <img src='/img/authors/gerred-dillon.png'>
                  <span class='author'>
                    Written by
                    <a href='https://twitter.com/justicefries' target='_new'>Gerred Dillon</a>
                  </span>
                  <time></time>
                </div>
                <div class='social-buttons'>
                  <a href="https://twitter.com/share" class="twitter-share-button" data-via="ionicframework" data-related="ionicframework">Tweet</a>
                  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
              </header>
              <h2 id="refreshing-a-list">Refreshing a List</h2>
              
              <p>Adding pull-to-refresh functionality to a list is easy in Ionic. To start, we create a basic Ionic list, but with one change. By prepending the <code>ion-refresher</code> directive outside of the list, we add everything we need:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre><span class="tag">&lt;body</span> <span class="attribute-name">ng-app</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ionicApp</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;  <span class="tag">&lt;ion-header-bar</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bar-energized</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;    <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Pull to Refresh!<span class="tag">&lt;/h1&gt;</span>&#x000A;  <span class="tag">&lt;/ion-header-bar&gt;</span>&#x000A;  <span class="tag">&lt;ion-content</span> <span class="attribute-name">ng-controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TodosCtrl</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;    <span class="tag">&lt;ion-refresher</span> <span class="attribute-name">pulling-text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Pull to refresh</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">on-refresh</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">doRefresh()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;    <span class="tag">&lt;/ion-refresher&gt;</span>&#x000A;    <span class="tag">&lt;ion-list&gt;</span>&#x000A;      <span class="tag">&lt;ion-item</span> <span class="attribute-name">ng-repeat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo in todos</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{todo.name}}<span class="tag">&lt;/ion-item&gt;</span>&#x000A;    <span class="tag">&lt;/ion-list&gt;</span>     &#x000A;  <span class="tag">&lt;/ion-content&gt;</span>&#x000A;&#x000A;<span class="tag">&lt;/body&gt;</span></pre></div>
              </div>
              </div>
              
              <p>The <code>ion-refresher</code> directive takes several attributes, but the most important is the <code>on-refresh</code> handler. This will call the associated function on your controller. To setup the controller, we create a basic Ionic application:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre><span class="keyword">var</span> app = angular.module(<span class="string"><span class="delimiter">'</span><span class="content">ionicApp</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">ionic</span><span class="delimiter">'</span></span>])&#x000A;&#x000A;app.controller(<span class="string"><span class="delimiter">'</span><span class="content">TodosCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>) {&#x000A;  <span class="predefined">$scope</span>.todos =  [&#x000A;    {<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Do the dishes</span><span class="delimiter">&quot;</span></span>},&#x000A;    {<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Take out the trash</span><span class="delimiter">&quot;</span></span>}&#x000A;  ]&#x000A;  &#x000A;  <span class="predefined">$scope</span>.<span class="function">doRefresh</span> = <span class="keyword">function</span>() {&#x000A;    <span class="predefined">$scope</span>.todos.unshift({<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Incoming todo </span><span class="delimiter">'</span></span> + Date.now()})&#x000A;    <span class="predefined">$scope</span>.<span class="predefined">$broadcast</span>(<span class="string"><span class="delimiter">'</span><span class="content">scroll.refreshComplete</span><span class="delimiter">'</span></span>);&#x000A;    <span class="predefined">$scope</span>.<span class="predefined">$apply</span>()&#x000A;  };&#x000A;  &#x000A;})</pre></div>
              </div>
              </div>
              
              <p>Because we are making simple scope changes outside of the context of a digest cycle, we have to use <code>$scope.$apply()</code>. Typically, data will come from an external source, like ng-resource, Restangular, or the <code>$http</code> directive. In this case, we can use a promise and manually running a digest cycle is not necessary:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre><span class="predefined">$http</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">/my_resource</span><span class="delimiter">'</span></span>)&#x000A;.success(<span class="keyword">function</span>(data) {&#x000A;  <span class="predefined">$scope</span>.resource = data.resource&#x000A;})&#x000A;.<span class="keyword">finally</span>(<span class="keyword">function</span>() {&#x000A;  <span class="predefined">$scope</span>.<span class="predefined">$broadcast</span>(<span class="string"><span class="delimiter">'</span><span class="content">scroll.refreshComplete</span><span class="delimiter">'</span></span>)&#x000A;})</pre></div>
              </div>
              </div>
              
              <p>The important thing to remember here is that the <code>scroll.refreshComplete</code> event must be called to resume normal use of the list.</p>
              
              <p>Check it out below in the Scratchpad!</p>
              <section class='scratchpad'>
                <p>Try this tutorial out below in the Scratchpad:</p>
                <div id='scratch'></div>
              </section>
              <footer>
                <h6>further reading</h6>
                <div class='similar-items list'>
                  <div class='item-row'>
                    <div class='similar-item'>
                      <a href='/formulas/making-modals/'>Making Modals</a>
                      <p>Modals are an essential UI component of any app needing to show a detail view. This formula goes into the details of making those modals.</p>
                    </div>
                  </div>
                  <div class='rule'></div>
                  <div class='similar-item'>
                    <a href='/formulas/action-sheets/'>Understanding Action Sheets</a>
                    <p>Action sheets can be a useful UI for providing contextual actions. Learn how to create one, and use custom gestures as a bonus.</p>
                  </div>
                  <div class='item-row'>
                    <div class='similar-item'>
                      <a href='/formulas/using-the-grid/'>Using the Grid</a>
                      <p>Get started with using Ionic's grid system to organize your content.</p>
                    </div>
                  </div>
                  <div class='rule'></div>
                  <div class='similar-item'>
                    <a href='/formulas/navigation-bar-vs-header-bar/'>Navigating Ionic's Headers</a>
                    <p>Ionic includes multiple ways to display a header at the top of the screen. Learn the difference between nav bars and header bars, and when to use each.</p>
                  </div>
                </div>
              </footer>
            </article>
          </div>
        </div>
      </div>
      <footer class='main'>
        <span class='attribution'>&copy; 2014 Drifty Co.</span>
        <span class='expand-wrapper'>
          <span class='expand'></span>
        </span>
        <nav id='nav'>
          <a href='http://ionicframework.com' target='_blank'>Ionic</a>
          <a href='https://github.com/driftyco/ionic' target='_blank'>Github</a>
          <a href='mailto:hi@ionicframework.com' target='_blank'>Contact us</a>
          <a href='https://github.com/driftyco/ionic-learn/issues/new' target='_blank'>Suggestions</a>
          <a href='http://ionicons.com/' target='_blank'>Ionicons</a>
          <a href='http://ionicframework.com/jobs/' target='_blank'>Jobs</a>
          <a href='http://forum.ionicframework.com/' target='_blank'>Forum</a>
          <a href='http://ionicframework.com/blog/' target='_blank'>Blog</a>
          <a href='http://drifty.com' target='_blank'>Drifty Co</a>
        </nav>
      </footer>
    </div>
    <div class='get-ionic-wrapper viewed'>
      <a class='get-ionic' href='http://www.ionicframework.com' target='_new'>Get building with Ionic today!</a>
      <a class='close-cta ion-ios7-close-empty' href='#'></a>
    </div>
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js'></script>
    <script src='//scratch.ionicsdk.com/static/js/embed.js'></script>
      <script>
        $(function() {
          var getTemplate = function(url) {
            return $.ajax({url: location.pathname + '/' + url, dataType: 'text'})
          }
        
          $.when(getTemplate('template.html'), getTemplate('style.css'), getTemplate('script.js')).then(function(html, css, js) {
            var scratch = new IonicScratch({
              el: document.getElementById('scratch'),
              width: '100%',
              height: '600px',
              html: html[0],
              css: css[0],
              js: js[0]
            });
          })
        })
      </script>
    <script src='/js/main.js'></script>
  </body>
</html>
